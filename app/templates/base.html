<!DOCTYPE html>
<html lang="pl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1"> <!-- ważne dla responsywności -->
  <link rel="manifest" href="{{ url_for('static', filename='manifest.json') }}">
  <title>{% block title %}Panel Administracyjny Szwalni{% endblock %}</title>
  <!-- Bootstrap CSS -->
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css">
  <!-- Font Awesome Icons -->
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
  <style>
    /* Krok 1: Definicja palety kolorów za pomocą zmiennych CSS */
    :root {
        --bg-color: #ffffff;
        --text-color: #333333;
        --primary-color: #0056b3;
        --primary-hover: #004494;
        --card-border-color: #dee2e6;
        --card-bg-color: #ffffff;
        --navbar-bg-color: #0056b3;
        --navbar-text-color: #ffffff;
    }

    body.dark-mode {
        --bg-color: #121212;
        --text-color: #e0e0e0;
        --primary-color: #007bff;
        --primary-hover: #0056b3;
        --card-border-color: #444444;
        --card-bg-color: #1e1e1e;
        --navbar-bg-color: #1e1e1e;
        --navbar-text-color: #e0e0e0;
    }

    /* Krok 2: Użycie zmiennych w istniejących stylach */
    body {
        background-color: var(--bg-color);
        color: var(--text-color);
        transition: background-color 0.3s, color 0.3s; /* Płynne przejście */
    }
    .navbar {
        background-color: var(--navbar-bg-color) !important;
    }
    .navbar-brand, .nav-link {
        color: var(--navbar-text-color) !important;
    }
    .nav-link:hover {
        color: #ff4d4d !important;
    }
    h1, h2, h3 {
        color: var(--primary-color);
    }
    .btn-primary {
        background-color: var(--primary-color);
        border-color: var(--primary-color);
    }
    .btn-primary:hover {
        background-color: var(--primary-hover);
        border-color: var(--primary-hover);
    }
    .card {
        border: 1px solid var(--card-border-color);
        background-color: var(--card-bg-color);
        box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    }
    .table {
        color: var(--text-color);
    }
    .table-striped tbody tr:nth-of-type(odd) {
        background-color: rgba(0, 0, 0, 0.03);
    }
    body.dark-mode .table-striped tbody tr:nth-of-type(odd) {
        background-color: rgba(255, 255, 255, 0.05);
    }
    body.dark-mode .table-hover tbody tr:hover {
        background-color: rgba(255, 255, 255, 0.075);
    }
    body.dark-mode .form-control {
        background-color: #2a2a2a;
        color: var(--text-color);
        border-color: var(--card-border-color);
    }
    body.dark-mode .thead-dark th {
        background-color: #343a40 !important;
    }

    /* Styl dla przełącznika dark mode */
    #darkModeToggle {
        cursor: pointer;
        font-size: 1.2rem;
        padding: 0.5rem;
    }

    /* Dodatkowe style dla tła na szerokich ekranach */
@media (min-width: 1600px) { /* Style aktywują się tylko na bardzo szerokich ekranach */
    body {
        background-image: url("{{ url_for('static', filename='images/bg_krojownia.png') }}"), 
                          url("{{ url_for('static', filename='images/bg_szwalnia.png') }}");
        background-repeat: no-repeat, no-repeat;
        background-attachment: fixed, fixed;
        background-position: left center, right center;
        background-size: 300px, 300px; /* Możesz dostosować ten rozmiar */
    }
}

</style>
  {% block head %}{% endblock %}
</head>
<body>
  
<nav class="navbar navbar-expand-lg navbar-dark fixed-top" style="background-color: #0056b3;">
  <a class="navbar-brand" href="{{ url_for('orders_list') }}">
    <i class="fas fa-tshirt"></i> Szwalnia
  </a>
  <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNav" 
          aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
    <span class="navbar-toggler-icon"></span>
  </button>

  <div class="collapse navbar-collapse" id="navbarNav">
    <ul class="navbar-nav mr-auto">
      <li class="nav-item">
        <a class="nav-link" href="{{ url_for('orders_list') }}">
          <i class="fas fa-list"></i> Zlecenia
        </a>
      </li>
      <li class="nav-item">
                    <a class="nav-link" href="{{ url_for('orders_history') }}"><i class="fas fa-history"></i> Historia zleceń</a>
                </li>
      <li class="nav-item">
        <a class="nav-link" href="{{ url_for('order_templates') }}">
          <i class="fas fa-bookmark"></i> Szablony
        </a>
      </li>
      
      <li class="nav-item">
        <a class="nav-link" href="{{ url_for('reports') }}">
            <i class="fas fa-chart-pie"></i> Zestawienia
        </a>
      </li>
      <li class="nav-item">
        <a class="nav-link" href="{{ url_for('calculator') }}">
          <i class="fas fa-calculator"></i> Kalkulator
        </a>
      </li>
       <!-- Separator -->
  <li class="nav-item">
    <span class="navbar-text mx-3" style="font-size: 1.2rem;">|</span>
  </li>
      <li class="nav-item">
        <!-- Separator -->
  <li class="nav-item">
    <span class="navbar-text mx-3" style="font-size: 1.2rem;">|</span>
  </li>
      <li class="nav-item">
        <a class="nav-link" href="{{ url_for('kanban') }}">
          <i class="fas fa-table-columns"></i> Kto co szyje
        </a>
      </li>
      <li class="nav-item">
        <a class="nav-link" href="{{ url_for('krojownia') }}">
          <i class="fas fa-scissors"></i> Krojownia
        </a>
      </li>
     <!-- Separator -->
  <li class="nav-item">
    <span class="navbar-text mx-3" style="font-size: 1.2rem;">|</span>
  </li>
   <!-- Separator -->
  <li class="nav-item">
    <span class="navbar-text mx-3" style="font-size: 1.2rem;">|</span>
  </li>
      
      <li class="nav-item">
        <a class="nav-link" href="{{ url_for('products_list') }}">
            <i class="fas fa-box-open"></i> Produkty
        </a>
      </li>
     
      <li class="nav-item">
        <a class="nav-link" href="{{ url_for('materials_management') }}">
            <i class="fas fa-scroll"></i> Tkaniny&Dodatki
        </a>
      </li>
      <li class="nav-item">
        <a class="nav-link" href="{{ url_for('subiekt_mapping') }}">
            <i class="fas fa-link"></i> Mapowanie Subiekt
        </a>
      </li>
    </ul>
    </ul>
    <div class="collapse navbar-collapse" id="navbarNav">
    <ul class="navbar-nav mr-auto">
        </ul>

    

    
</div>
     <!-- Logo po prawej stronie -->
     <span class="navbar-text">
      <img src="{{ url_for('static', filename='uploads/hoxa.png') }}" alt="Logo" style="height: 30px;">
    </span>
  </div>
</nav>

<div class="container" style="margin-top:75px;">
  {% if in_progress_orders %}
        {% include '_in_progress_strip.html' %}
    {% endif %}
  {% with messages = get_flashed_messages(with_categories=true) %}
    {% if messages %}
      {% for category, message in messages %}
        <div class="alert alert-{{ category }}" role="alert">
          <i class="fas fa-info-circle"></i> {{ message }}
        </div>
      {% endfor %}
    {% endif %}
  {% endwith %}
  {% block content %}{% endblock %}
</div>

<!-- Bootstrap JS oraz zależności -->
<script src="https://code.jquery.com/jquery-3.2.1.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"></script>
{% block scripts %}

<script>
    (function() {
        const toggleButton = document.getElementById('darkModeToggle');
        const sunIcon = '<i class="fas fa-sun"></i>';
        const moonIcon = '<i class="fas fa-moon"></i>';

        // Funkcja do ustawiania motywu
        function setMode(mode) {
            if (mode === 'dark') {
                document.body.classList.add('dark-mode');
                toggleButton.innerHTML = sunIcon;
                localStorage.setItem('theme', 'dark');
            } else {
                document.body.classList.remove('dark-mode');
                toggleButton.innerHTML = moonIcon;
                localStorage.setItem('theme', 'light');
            }
        }

        // Logika kliknięcia w przełącznik
        toggleButton.addEventListener('click', () => {
            if (document.body.classList.contains('dark-mode')) {
                setMode('light');
            } else {
                setMode('dark');
            }
        });

        // Sprawdź zapisany motyw przy ładowaniu strony
        const savedTheme = localStorage.getItem('theme') || 'light';
        setMode(savedTheme);
    })();
</script>

{% endblock %}

</body>
</html>
